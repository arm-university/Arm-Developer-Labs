// =============================================================================
// RESPONSIVE.SCSS - Mobile-First Responsive Framework
// =============================================================================
// This partial contains all responsive overrides for mobile devices.
// Import this file LAST in main.scss to ensure proper cascade.
//
// Breakpoint Reference (from _variables.scss):
//   - sm: 0px (mobile-first base)
//   - md: 500px (tablets)
//   - lg: 1024px (desktop)
//
// Custom breakpoints used here:
//   - 768px: Standard mobile/tablet threshold
//   - 480px: Small mobile devices
//   - 320px: Minimum supported width
// =============================================================================

// -----------------------------------------------------------------------------
// CSS Custom Properties for Responsive Spacing
// -----------------------------------------------------------------------------
:root {
  --mobile-spacing-xs: 0.5rem;
  --mobile-spacing-sm: 1rem;
  --mobile-spacing-md: 1.5rem;
  --mobile-spacing-lg: 2rem;
}

// -----------------------------------------------------------------------------
// 1. GLOBAL SAFETY NET - Prevent Horizontal Overflow
// -----------------------------------------------------------------------------
html {
  overflow-x: hidden;
  scroll-behavior: smooth;
}

body {
  overflow-x: hidden;
  min-width: 320px; // Minimum supported viewport
}

// Universal media scaling
img,
svg,
video,
iframe,
embed,
object {
  max-width: 100%;
  height: auto;
}

// Prevent fixed-width elements from causing overflow
pre,
code,
table {
  max-width: 100%;
  overflow-x: auto;
}

// -----------------------------------------------------------------------------
// 2. TABLET BREAKPOINT (max-width: 768px)
// -----------------------------------------------------------------------------
@media screen and (max-width: 768px) {
  
  // -------------------------------------------------------------------------
  // 2.1 Layout Containers - Force fluid widths
  // -------------------------------------------------------------------------
  .root,
  .layout--page,
  .layout--home,
  .layout--landing,
  .layout--article,
  .layout--articles,
  .page__main,
  .page__main-inner,
  .page__content,
  .page__viewport {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }

  // -------------------------------------------------------------------------
  // 2.2 Hero Section - Critical Fix for Text Bleeding
  // -------------------------------------------------------------------------
  .hero {
    position: relative;
    min-height: auto;
    padding: var(--mobile-spacing-md);
    
    // Ensure flex column stacking
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .hero__content {
    width: 100%;
    max-width: 100%;
    margin: var(--mobile-spacing-sm);
    padding: var(--mobile-spacing-sm);
    box-sizing: border-box;
    
    // Center text for mobile
    text-align: center;
    
    // Stack children vertically
    display: flex;
    flex-direction: column;
    align-items: center;
    
    // Remove any transforms that could cause bleeding
    transform: none;
    left: auto;
    right: auto;
  }

  // Hero typography scaling using existing variables pattern
  .hero,
  .hero__content {
    h1 {
      font-size: clamp(1.5rem, 6vw, 2.5rem);
      line-height: 1.2;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }
    
    h2 {
      font-size: clamp(1.25rem, 5vw, 2rem);
      line-height: 1.25;
    }
    
    h3 {
      font-size: clamp(1.1rem, 4.5vw, 1.75rem);
      line-height: 1.3;
    }
    
    p {
      font-size: clamp(0.9rem, 3.5vw, 1.1rem);
      line-height: 1.5;
    }
  }

  .heros {
    width: 100%;
    max-width: 100%;
    
    & > .hero {
      margin: var(--mobile-spacing-sm) 0;
    }
  }

  .hero__cover {
    max-width: 100%;
    
    img {
      width: 100%;
      height: auto;
      object-fit: contain;
    }
  }

  // Cover image responsive height
  .crop_image--cover {
    height: 45vh;
    min-height: 220px;
    max-height: 400px;
  }

  // -------------------------------------------------------------------------
  // 2.3 Header - Mobile Navigation
  // -------------------------------------------------------------------------
  .header {
    padding: var(--mobile-spacing-xs) var(--mobile-spacing-sm);
    
    .main {
      flex-direction: column;
      width: 100%;
    }
  }

  .header__title {
    width: 100%;
    flex-wrap: nowrap;
    justify-content: space-between;
    margin-right: 0;
  }

  .header__brand {
    flex: 1 1 auto;
    min-width: 0; // Allow shrinking below content size
    overflow: hidden;
  }

  // -------------------------------------------------------------------------
  // 2.4 Footer - Partner Logos Wrapping
  // -------------------------------------------------------------------------
  .footer {
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--mobile-spacing-md);
    gap: var(--mobile-spacing-md);
  }

  .footer__section {
    width: 100%;
    max-width: 100%;
  }

  .footer .site-info {
    width: 100%;
    
    .menu {
      flex-wrap: wrap;
      justify-content: center;
      gap: var(--mobile-spacing-xs);
    }
  }

  // Partner logo carousel
  .scroll-container {
    height: 10vh;
    min-height: 60px;
    max-height: 100px;
  }

  .carousel {
    img {
      height: 7vh;
      min-height: 45px;
      max-height: 70px;
      margin-left: 30px;
    }
  }

  // -------------------------------------------------------------------------
  // 2.5 Grid System - Force single column
  // -------------------------------------------------------------------------
  .grid {
    flex-direction: column;
  }

  .grid > .cell,
  [class*="cell--"] {
    width: 100%;
    flex: 0 0 100%;
    max-width: 100%;
  }

  // -------------------------------------------------------------------------
  // 2.6 Navigation Menu
  // -------------------------------------------------------------------------
  .navigation > ul {
    flex-wrap: wrap;
    justify-content: center;
    height: auto;
    padding: var(--mobile-spacing-xs) 0;
  }

  .navigation__item {
    margin: var(--mobile-spacing-xs);
  }

  // -------------------------------------------------------------------------
  // 2.7 Buttons & Menus
  // -------------------------------------------------------------------------
  .menu {
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--mobile-spacing-xs);
    
    > li {
      margin: calc(var(--mobile-spacing-xs) / 2);
    }
  }

  .button--lg {
    padding: 0.6rem 1.2rem;
    font-size: 0.9rem;
  }

  // -------------------------------------------------------------------------
  // 2.8 Article Content
  // -------------------------------------------------------------------------
  .article__content,
  .article-list,
  .items {
    padding-left: var(--mobile-spacing-sm);
    padding-right: var(--mobile-spacing-sm);
  }

  // -------------------------------------------------------------------------
  // 2.9 Spacing Overrides - Convert fixed to fluid
  // -------------------------------------------------------------------------
  .mb-5 {
    margin-bottom: var(--mobile-spacing-md);
  }

  .mt-5 {
    margin-top: var(--mobile-spacing-md);
  }

  .p-5 {
    padding: var(--mobile-spacing-md);
  }

} // End @media (max-width: 768px)


// -----------------------------------------------------------------------------
// 3. SMALL MOBILE BREAKPOINT (max-width: 480px)
// -----------------------------------------------------------------------------
@media screen and (max-width: 480px) {

  // Tighter spacing for small screens
  :root {
    --mobile-spacing-xs: 0.375rem;
    --mobile-spacing-sm: 0.75rem;
    --mobile-spacing-md: 1rem;
    --mobile-spacing-lg: 1.5rem;
  }

  .hero__content {
    margin: var(--mobile-spacing-xs);
    padding: var(--mobile-spacing-xs);
    
    h1 {
      font-size: clamp(1.25rem, 7vw, 1.75rem);
    }
    
    h2 {
      font-size: clamp(1rem, 6vw, 1.5rem);
    }
    
    h3 {
      font-size: clamp(0.95rem, 5vw, 1.25rem);
    }
  }

  .crop_image--cover {
    height: 35vh;
    min-height: 180px;
    max-height: 300px;
  }

  .scroll-container {
    height: 8vh;
    min-height: 50px;
  }

  .carousel img {
    height: 6vh;
    min-height: 35px;
    max-height: 55px;
    margin-left: 20px;
  }

  .page__content {
    padding: var(--mobile-spacing-sm);
  }

  // Reduce header padding
  .header {
    padding: var(--mobile-spacing-xs);
  }

} // End @media (max-width: 480px)


// -----------------------------------------------------------------------------
// 4. MINIMUM SUPPORTED WIDTH (max-width: 320px)
// -----------------------------------------------------------------------------
@media screen and (max-width: 320px) {

  .hero__content {
    margin: 0.25rem;
    padding: 0.25rem;
    
    h1 {
      font-size: 1.2rem;
    }
    
    h2 {
      font-size: 1rem;
    }
    
    h3 {
      font-size: 0.9rem;
    }
    
    p {
      font-size: 0.85rem;
    }
  }

  .brand_logo svg {
    width: clamp(120px, 70vw, 160px);
    margin-right: 4px;
  }

  .button--lg {
    padding: 0.5rem 0.8rem;
    font-size: 0.85rem;
  }

} // End @media (max-width: 320px)


// -----------------------------------------------------------------------------
// 5. PRINT STYLES - Ensure clean printing
// -----------------------------------------------------------------------------
@media print {
  
  .hero {
    min-height: auto;
    page-break-inside: avoid;
  }
  
  .scroll-container,
  .carousel {
    display: none;
  }
  
  .footer {
    flex-direction: column;
  }
  
}
